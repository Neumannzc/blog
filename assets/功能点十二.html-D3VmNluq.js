import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,b as t,d as p,o as e}from"./app-DFIA2Mf1.js";const o={};function c(l,n){return e(),a("div",null,[t(" more "),n[0]||(n[0]=p(`<h2 id="_12-1准备工作" tabindex="-1"><a class="header-anchor" href="#_12-1准备工作"><span>12.1准备工作</span></a></h2><h3 id="_12-1-​1-注册阿里云-oss-账号" tabindex="-1"><a class="header-anchor" href="#_12-1-​1-注册阿里云-oss-账号"><span>12.1.​1 注册阿里云 OSS 账号</span></a></h3><ul><li>访问 阿里云官网 注册账号。</li><li>进入 OSS 控制台 创建存储桶（Bucket）。</li></ul><h3 id="_12-1-​2-获取-accesskey-和-secretkey" tabindex="-1"><a class="header-anchor" href="#_12-1-​2-获取-accesskey-和-secretkey"><span>12.1.​2 获取 AccessKey 和 SecretKey</span></a></h3><ul><li>在 OSS 控制台生成 AccessKeyId 和 AccessKeySecret。</li></ul><h3 id="_12-1-​3-依赖引入" tabindex="-1"><a class="header-anchor" href="#_12-1-​3-依赖引入"><span>12.1.​3 依赖引入</span></a></h3><ul><li>在 Spring Boot 项目的 pom.xml 中添加 OSS 客户端依赖：</li></ul><div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.aliyun.oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aliyun-oss-sdk-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.15.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- 使用最新版本 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>​</p><h2 id="_12-2、配置-oss-客户端" tabindex="-1"><a class="header-anchor" href="#_12-2、配置-oss-客户端"><span>12.2、配置 OSS 客户端</span></a></h2><h2 id="_12-2-1-application-properties-配置" tabindex="-1"><a class="header-anchor" href="#_12-2-1-application-properties-配置"><span>12.2.1 application.properties 配置</span></a></h2><div class="language-properties line-numbers-mode" data-ext="properties" data-title="properties"><pre class="language-properties"><code><span class="token comment"># OSS 配置</span>
<span class="token key attr-name">aliyun.oss.accessKeyId</span><span class="token punctuation">=</span><span class="token value attr-value">你的AccessKeyId</span>
<span class="token key attr-name">aliyun.oss.secretKey</span><span class="token punctuation">=</span><span class="token value attr-value">你的AccessKeySecret</span>
<span class="token key attr-name">aliyun.oss.bucketName</span><span class="token punctuation">=</span><span class="token value attr-value">你的存储桶名称</span>
<span class="token key attr-name">aliyun.oss.endpoint</span><span class="token punctuation">=</span><span class="token value attr-value">你的OSS区域域名（如 ap-nanjing.aliyuncs.com）</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_12-2-2-创建-oss-配置类" tabindex="-1"><a class="header-anchor" href="#_12-2-2-创建-oss-配置类"><span>12.2.2 创建 OSS 配置类</span></a></h2><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OssConfig</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${aliyun.oss.accessKeyId}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> accessKeyId<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${aliyun.oss.secretKey}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> secretKey<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${aliyun.oss.bucketName}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> bucketName<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${aliyun.oss.endpoint}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> endpoint<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">OSS</span> <span class="token function">ossClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OSSClientBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">withEndpoint</span><span class="token punctuation">(</span>endpoint<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">withCredentials</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DefaultOSSCredentialsProvider</span><span class="token punctuation">(</span>accessKeyId<span class="token punctuation">,</span> secretKey<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_11-3-文件上传实现" tabindex="-1"><a class="header-anchor" href="#_11-3-文件上传实现"><span>11.3 文件上传实现</span></a></h2><h3 id="_11-3-1-上传文件的-controller" tabindex="-1"><a class="header-anchor" href="#_11-3-1-上传文件的-controller"><span>11.3.1 上传文件的 Controller</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileUploadController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">OSS</span> ossClient<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/upload&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">uploadFile</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;file&quot;</span><span class="token punctuation">)</span> <span class="token class-name">MultipartFile</span> file<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// 获取文件名（去除路径）</span>
            <span class="token class-name">String</span> fileName <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 生成 OSS 对象键（可自定义路径）</span>
            <span class="token class-name">String</span> objectKey <span class="token operator">=</span> <span class="token string">&quot;uploads/&quot;</span> <span class="token operator">+</span> fileName<span class="token punctuation">;</span>

            <span class="token comment">// 上传文件到 OSS</span>
            ossClient<span class="token punctuation">.</span><span class="token function">putObject</span><span class="token punctuation">(</span>bucketName<span class="token punctuation">,</span> objectKey<span class="token punctuation">,</span> file<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token string">&quot;文件上传成功：https://&quot;</span> <span class="token operator">+</span> bucketName <span class="token operator">+</span> <span class="token string">&quot;.oss.&quot;</span> <span class="token operator">+</span> endpoint <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> objectKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">INTERNAL_SERVER_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token string">&quot;文件上传失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11-3-2-前端上传示例-html-javascript-​" tabindex="-1"><a class="header-anchor" href="#_11-3-2-前端上传示例-html-javascript-​"><span>11.3.2 前端上传示例（HTML + JavaScript）​</span></a></h3><div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fileInput<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token function">upload</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>上传文件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        <span class="token keyword">function</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> fileInput <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;fileInput&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&#39;file&#39;</span><span class="token punctuation">,</span> fileInput<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#39;/upload&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;POST&#39;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">body</span><span class="token operator">:</span> formData
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;Error:&#39;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_11-4-高级功能扩展" tabindex="-1"><a class="header-anchor" href="#_11-4-高级功能扩展"><span>11.4 高级功能扩展</span></a></h2><h3 id="_11-4-​1-文件分片上传-大文件支持-​" tabindex="-1"><a class="header-anchor" href="#_11-4-​1-文件分片上传-大文件支持-​"><span>11.4.​1 文件分片上传（大文件支持）​</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">uploadLargeFile</span><span class="token punctuation">(</span><span class="token class-name">MultipartFile</span> file<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> objectKey <span class="token operator">=</span> <span class="token string">&quot;large-file/&quot;</span> <span class="token operator">+</span> file<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">InitiateMultipartUploadRequest</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InitiateMultipartUploadRequest</span><span class="token punctuation">(</span>bucketName<span class="token punctuation">,</span> objectKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">MultipartUploadResult</span> result <span class="token operator">=</span> ossClient<span class="token punctuation">.</span><span class="token function">initiateMultipartUpload</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 分片上传逻辑...</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> file<span class="token punctuation">.</span><span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token constant">CHUNK_SIZE</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">UploadPartRequest</span> partRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UploadPartRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">withBucketName</span><span class="token punctuation">(</span>bucketName<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">withKey</span><span class="token punctuation">(</span>objectKey<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">withUploadId</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">getUploadId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">withPartNumber</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">withInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ByteArrayInputStream</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">withPartSize</span><span class="token punctuation">(</span><span class="token constant">CHUNK_SIZE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ossClient<span class="token punctuation">.</span><span class="token function">uploadPart</span><span class="token punctuation">(</span>partRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 完成分片上传</span>
    <span class="token class-name">CompleteMultipartUploadRequest</span> completeRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CompleteMultipartUploadRequest</span><span class="token punctuation">(</span>
        bucketName<span class="token punctuation">,</span> objectKey<span class="token punctuation">,</span> result<span class="token punctuation">.</span><span class="token function">getUploadId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> parts<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ossClient<span class="token punctuation">.</span><span class="token function">completeMultipartUpload</span><span class="token punctuation">(</span>completeRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11-4-​2-设置文件访问权限" tabindex="-1"><a class="header-anchor" href="#_11-4-​2-设置文件访问权限"><span>11.4.​2 设置文件访问权限</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// 设置公开可读</span>
<span class="token class-name">ObjectMetadata</span> metadata <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMetadata</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
metadata<span class="token punctuation">.</span><span class="token function">setCacheControl</span><span class="token punctuation">(</span><span class="token string">&quot;public-read&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ossClient<span class="token punctuation">.</span><span class="token function">putObject</span><span class="token punctuation">(</span>bucketName<span class="token punctuation">,</span> objectKey<span class="token punctuation">,</span> inputStream<span class="token punctuation">,</span> metadata<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 设置私有访问</span>
<span class="token class-name">CannedAccessControlList</span> acl <span class="token operator">=</span> <span class="token class-name">CannedAccessControlList<span class="token punctuation">.</span>Private</span><span class="token punctuation">;</span>
ossClient<span class="token punctuation">.</span><span class="token function">putObject</span><span class="token punctuation">(</span>bucketName<span class="token punctuation">,</span> objectKey<span class="token punctuation">,</span> inputStream<span class="token punctuation">,</span> metadata<span class="token punctuation">,</span> acl<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_11-5-注意事项" tabindex="-1"><a class="header-anchor" href="#_11-5-注意事项"><span>11.5 注意事项</span></a></h2><ul><li><p>​安全性：</p><ul><li>不要将 AccessKey 和 SecretKey 硬编码在代码中，建议使用环境变量或密钥管理服务（如 AWS Secrets Manager）。</li><li>限制存储桶的公开访问权限（如仅允许特定 IP 或 VPC 访问）。</li></ul></li><li><p>​异常处理：</p><ul><li>处理网络异常、OSS 服务限流等问题。</li><li>使用重试机制（如 Spring Retry）提高稳定性。</li></ul></li><li><p>​成本优化：</p><ul><li>选择合适的存储类型（如 Standard、Infrequent Access）。</li><li>删除无用文件定期清理存储桶。</li></ul></li></ul><h2 id="_11-6-验证文件上传" tabindex="-1"><a class="header-anchor" href="#_11-6-验证文件上传"><span>11.6 验证文件上传</span></a></h2><ul><li>访问 OSS 控制台，确认文件已成功上传。</li><li>通过返回的 URL 直接访问文件（如 https://your-bucket.oss.aliyuncs.com/your-file-name）。</li></ul>`,28))])}const k=s(o,[["render",c],["__file","功能点十二.html.vue"]]),r=JSON.parse('{"path":"/posts/project/sky/function/%E5%8A%9F%E8%83%BD%E7%82%B9%E5%8D%81%E4%BA%8C.html","title":"12 文件上传阿里云oss","lang":"zh-CN","frontmatter":{"title":"12 文件上传阿里云oss","date":"2025-02-18T00:00:00.000Z","icon":"dragon","category":["棠棠外卖"],"tag":["项目总结"],"order":112,"head":[["meta",{"property":"og:url","content":"https://github.com/Neumannzc/blog/blog/posts/project/sky/function/%E5%8A%9F%E8%83%BD%E7%82%B9%E5%8D%81%E4%BA%8C.html"}],["meta",{"property":"og:site_name","content":"Cafe Babe"}],["meta",{"property":"og:title","content":"12 文件上传阿里云oss"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-02-27T13:21:51.000Z"}],["meta",{"property":"article:author","content":"Cafe Babe"}],["meta",{"property":"article:tag","content":"项目总结"}],["meta",{"property":"article:published_time","content":"2025-02-18T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-02-27T13:21:51.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"12 文件上传阿里云oss\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-02-18T00:00:00.000Z\\",\\"dateModified\\":\\"2025-02-27T13:21:51.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Cafe Babe\\",\\"url\\":\\"https://gitee.com/z517890027\\"}]}"]]},"headers":[{"level":2,"title":"12.1准备工作","slug":"_12-1准备工作","link":"#_12-1准备工作","children":[{"level":3,"title":"12.1.​1 注册阿里云 OSS 账号","slug":"_12-1-​1-注册阿里云-oss-账号","link":"#_12-1-​1-注册阿里云-oss-账号","children":[]},{"level":3,"title":"12.1.​2 获取 AccessKey 和 SecretKey","slug":"_12-1-​2-获取-accesskey-和-secretkey","link":"#_12-1-​2-获取-accesskey-和-secretkey","children":[]},{"level":3,"title":"12.1.​3 依赖引入","slug":"_12-1-​3-依赖引入","link":"#_12-1-​3-依赖引入","children":[]}]},{"level":2,"title":"12.2、配置 OSS 客户端","slug":"_12-2、配置-oss-客户端","link":"#_12-2、配置-oss-客户端","children":[]},{"level":2,"title":"12.2.1 application.properties 配置","slug":"_12-2-1-application-properties-配置","link":"#_12-2-1-application-properties-配置","children":[]},{"level":2,"title":"12.2.2 创建 OSS 配置类","slug":"_12-2-2-创建-oss-配置类","link":"#_12-2-2-创建-oss-配置类","children":[]},{"level":2,"title":"11.3 文件上传实现","slug":"_11-3-文件上传实现","link":"#_11-3-文件上传实现","children":[{"level":3,"title":"11.3.1 上传文件的 Controller","slug":"_11-3-1-上传文件的-controller","link":"#_11-3-1-上传文件的-controller","children":[]},{"level":3,"title":"11.3.2 前端上传示例（HTML + JavaScript）​","slug":"_11-3-2-前端上传示例-html-javascript-​","link":"#_11-3-2-前端上传示例-html-javascript-​","children":[]}]},{"level":2,"title":"11.4 高级功能扩展","slug":"_11-4-高级功能扩展","link":"#_11-4-高级功能扩展","children":[{"level":3,"title":"11.4.​1 文件分片上传（大文件支持）​","slug":"_11-4-​1-文件分片上传-大文件支持-​","link":"#_11-4-​1-文件分片上传-大文件支持-​","children":[]},{"level":3,"title":"11.4.​2 设置文件访问权限","slug":"_11-4-​2-设置文件访问权限","link":"#_11-4-​2-设置文件访问权限","children":[]}]},{"level":2,"title":"11.5 注意事项","slug":"_11-5-注意事项","link":"#_11-5-注意事项","children":[]},{"level":2,"title":"11.6 验证文件上传","slug":"_11-6-验证文件上传","link":"#_11-6-验证文件上传","children":[]}],"git":{"createdTime":1740662511000,"updatedTime":1740662511000,"contributors":[{"name":"Cafe Babe","email":"517890027@qq.com","commits":1}]},"readingTime":{"minutes":2.31,"words":692},"filePathRelative":"posts/project/sky/function/功能点十二.md","localizedDate":"2025年2月18日","excerpt":""}');export{k as comp,r as data};
