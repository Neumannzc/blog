import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as s,a as t,b as e,d as p,o}from"./app-J_1JG69l.js";const l={};function c(i,n){return o(),s("div",null,[n[0]||(n[0]=t("p",null,"åœ¨ Spring Boot ä¸­ï¼Œ@Validated æ˜¯ç”¨äºè§¦å‘å‚æ•°æ ¡éªŒçš„æ³¨è§£ï¼Œé€šå¸¸ä¸ â€‹â€‹JSR-303/JSR-380â€‹â€‹ï¼ˆBean Validationï¼‰æä¾›çš„æ ¡éªŒæ³¨è§£ä¸€èµ·ä½¿ç”¨ã€‚ä»¥ä¸‹æ˜¯å¸¸è§çš„æ ¡éªŒæ³¨è§£åŠå…¶ç”¨æ³•ï¼š",-1)),e(" more "),n[1]||(n[1]=p(`<h2 id="â€‹1-åŸºæœ¬æ ¡éªŒæ³¨è§£â€‹â€‹" tabindex="-1"><a class="header-anchor" href="#â€‹1-åŸºæœ¬æ ¡éªŒæ³¨è§£â€‹â€‹"><span>â€‹1. åŸºæœ¬æ ¡éªŒæ³¨è§£â€‹â€‹</span></a></h2><p>è¿™äº›æ³¨è§£å¯ä»¥ç›´æ¥ç”¨äºå­—æ®µã€æ–¹æ³•å‚æ•°æˆ–æ–¹æ³•è¿”å›å€¼ï¼Œç»“åˆ @Validated è¿›è¡Œæ ¡éªŒã€‚</p><table><thead><tr><th>æ³¨è§£</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>@NotNull</td><td>ä¸èƒ½ä¸º null</td><td>@NotNull(message = &quot;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&quot;)</td></tr><tr><td>@NotEmpty</td><td>ä¸èƒ½ä¸º null ä¸”ä¸èƒ½ä¸ºç©ºï¼ˆé€‚ç”¨äº Stringã€Collectionã€Mapã€Arrayï¼‰</td><td>@NotEmpty(message = &quot;åˆ—è¡¨ä¸èƒ½ä¸ºç©º&quot;)</td></tr><tr><td>@NotBlank</td><td>ä¸èƒ½ä¸º null ä¸” trim() åé•¿åº¦ &gt; 0ï¼ˆä»…é€‚ç”¨äº Stringï¼‰</td><td>@NotBlank(message = &quot;å§“åä¸èƒ½ä¸ºç©º&quot;)</td></tr><tr><td>@Null</td><td>å¿…é¡»ä¸º null</td><td>@Null(message = &quot;ID ä¸èƒ½å­˜åœ¨&quot;)</td></tr><tr><td>@AssertTrue</td><td>å¿…é¡»ä¸º true</td><td>@AssertTrue(message = &quot;å¿…é¡»åŒæ„åè®®&quot;)</td></tr><tr><td>@AssertFalse</td><td>å¿…é¡»ä¸º false</td><td>@AssertFalse(message = &quot;ä¸èƒ½å¯ç”¨&quot;)</td></tr><tr><td>@Past</td><td>å¿…é¡»æ˜¯è¿‡å»çš„æ—¶é—´ï¼ˆDateã€LocalDateTime ç­‰ï¼‰</td><td>@Past(message = &quot;å‡ºç”Ÿæ—¥æœŸå¿…é¡»æ˜¯è¿‡å»&quot;)</td></tr><tr><td>@Future</td><td>å¿…é¡»æ˜¯æœªæ¥çš„æ—¶é—´</td><td>@Future(message = &quot;æˆªæ­¢æ—¶é—´å¿…é¡»æ˜¯æœªæ¥&quot;)</td></tr><tr><td>@Pattern(regex)</td><td>å¿…é¡»åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼</td><td>@Pattern(regexp = &quot;^[a-zA-Z0-9]+$&quot;, message = &quot;åªèƒ½åŒ…å«å­—æ¯å’Œæ•°å­—&quot;)</td></tr><tr><td>@Size(min, max)</td><td>å­—ç¬¦ä¸²/é›†åˆ/æ•°ç»„çš„é•¿åº¦èŒƒå›´</td><td>@Size(min = 2, max = 10, message = &quot;é•¿åº¦å¿…é¡»åœ¨ 2-10 ä¹‹é—´&quot;)</td></tr><tr><td>@Length(min, max)</td><td>ï¼ˆHibernate Validator æ‰©å±•ï¼‰åŒ @Size</td><td>@Length(min = 2, max = 10)</td></tr><tr><td>@Min(value)</td><td>æœ€å°å€¼ï¼ˆé€‚ç”¨äº Numberï¼‰</td><td>@Min(1, message = &quot;å¹´é¾„ä¸èƒ½å°äº 1&quot;)</td></tr><tr><td>@Max(value)</td><td>æœ€å¤§å€¼ï¼ˆé€‚ç”¨äº Numberï¼‰</td><td>@Max(120, message = &quot;å¹´é¾„ä¸èƒ½è¶…è¿‡ 120&quot;)</td></tr><tr><td>@DecimalMin(value)</td><td>æœ€å°å€¼ï¼ˆé€‚ç”¨äº BigDecimalï¼‰</td><td>@DecimalMin(&quot;0.01&quot;, message = &quot;é‡‘é¢ä¸èƒ½å°äº 0.01&quot;)</td></tr><tr><td>@DecimalMax(value)</td><td>æœ€å¤§å€¼ï¼ˆé€‚ç”¨äº BigDecimalï¼‰</td><td>@DecimalMax(&quot;999999.99&quot;)</td></tr><tr><td>@Digits(integer, fraction)</td><td>æ•°å­—ç²¾åº¦ï¼ˆæ•´æ•°ä½å’Œå°æ•°ä½ï¼‰</td><td>@Digits(integer = 5, fraction = 2, message = &quot;æœ€å¤š 5 ä½æ•´æ•°ï¼Œ2 ä½å°æ•°&quot;)</td></tr><tr><td>@Email</td><td>å¿…é¡»æ˜¯æœ‰æ•ˆçš„é‚®ç®±æ ¼å¼</td><td>@Email(message = &quot;é‚®ç®±æ ¼å¼ä¸æ­£ç¡®&quot;)</td></tr></tbody></table><h2 id="â€‹â€‹2-åˆ†ç»„æ ¡éªŒ-groups-â€‹â€‹" tabindex="-1"><a class="header-anchor" href="#â€‹â€‹2-åˆ†ç»„æ ¡éªŒ-groups-â€‹â€‹"><span>â€‹â€‹2. åˆ†ç»„æ ¡éªŒï¼ˆgroupsï¼‰â€‹â€‹</span></a></h2><p>å¯ä»¥å®šä¹‰ä¸åŒçš„æ ¡éªŒè§„åˆ™ï¼Œå¹¶åœ¨ç‰¹å®šåœºæ™¯ä¸‹ä½¿ç”¨ï¼š</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@NotNull</span><span class="token punctuation">(</span>groups <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">Create</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">Update</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">,</span> message <span class="token operator">=</span> <span class="token string">&quot;ID ä¸èƒ½ä¸ºç©º&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Null</span><span class="token punctuation">(</span>groups <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">Delete</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">,</span> message <span class="token operator">=</span> <span class="token string">&quot;åˆ é™¤æ—¶ä¸èƒ½ä¼  ID&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@NotBlank</span><span class="token punctuation">(</span>groups <span class="token operator">=</span> <span class="token class-name">Create</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> message <span class="token operator">=</span> <span class="token string">&quot;åˆ›å»ºæ—¶ç”¨æˆ·åä¸èƒ½ä¸ºç©º&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Create</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Update</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Delete</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>â€‹â€‹Controller ä½¿ç”¨åˆ†ç»„æ ¡éªŒâ€‹â€‹ï¼š</strong></p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/create&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Validated</span><span class="token punctuation">(</span><span class="token class-name">User<span class="token punctuation">.</span>Create</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// åªæ ¡éªŒ Create åˆ†ç»„çš„è§„åˆ™</span>
    <span class="token keyword">return</span> <span class="token string">&quot;Created&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@PutMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/update&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Validated</span><span class="token punctuation">(</span><span class="token class-name">User<span class="token punctuation">.</span>Update</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// åªæ ¡éªŒ Update åˆ†ç»„çš„è§„åˆ™</span>
    <span class="token keyword">return</span> <span class="token string">&quot;Updated&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="â€‹â€‹3-åµŒå¥—å¯¹è±¡æ ¡éªŒ-valid-â€‹â€‹" tabindex="-1"><a class="header-anchor" href="#â€‹â€‹3-åµŒå¥—å¯¹è±¡æ ¡éªŒ-valid-â€‹â€‹"><span>â€‹â€‹3. åµŒå¥—å¯¹è±¡æ ¡éªŒï¼ˆ@Validï¼‰â€‹â€‹</span></a></h2><p>å¦‚æœå¯¹è±¡åŒ…å«åµŒå¥—å¯¹è±¡ï¼Œéœ€è¦ç”¨ @Valid è§¦å‘åµŒå¥—æ ¡éªŒï¼š</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@NotNull</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Valid</span>  <span class="token comment">// è§¦å‘åµŒå¥—æ ¡éªŒ</span>
    <span class="token annotation punctuation">@NotNull</span>
    <span class="token keyword">private</span> <span class="token class-name">User</span> user<span class="token punctuation">;</span>  <span class="token comment">// User ç±»ä¹Ÿéœ€è¦æ ¡éªŒæ³¨è§£</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>â€‹â€‹Controller ä½¿ç”¨â€‹â€‹ï¼š</strong></p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/order&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">createOrder</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Validated</span> <span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Order</span> order<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä¼šæ ¡éªŒ Order å’Œ User çš„æ‰€æœ‰æ ¡éªŒè§„åˆ™</span>
    <span class="token keyword">return</span> <span class="token string">&quot;Order created&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="â€‹â€‹4-è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£â€‹â€‹" tabindex="-1"><a class="header-anchor" href="#â€‹â€‹4-è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£â€‹â€‹"><span>â€‹â€‹4. è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£â€‹â€‹</span></a></h2><p>å¦‚æœå†…ç½®æ³¨è§£ä¸æ»¡è¶³éœ€æ±‚ï¼Œå¯ä»¥è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£ï¼š â€‹â€‹ç¤ºä¾‹ï¼šæ ¡éªŒ Integer æ˜¯å¦æ˜¯ 0 æˆ– 1â€‹â€‹</p><h3 id="_1-å®šä¹‰æ³¨è§£-oneorzeroâ€‹â€‹" tabindex="-1"><a class="header-anchor" href="#_1-å®šä¹‰æ³¨è§£-oneorzeroâ€‹â€‹"><span>1. å®šä¹‰æ³¨è§£ @OneOrZeroâ€‹â€‹</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span></span><span class="token class-name">Constraint</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span></span><span class="token class-name">Payload</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">FIELD</span><span class="token punctuation">,</span> <span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">PARAMETER</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Constraint</span><span class="token punctuation">(</span>validatedBy <span class="token operator">=</span> <span class="token class-name">OneOrZeroValidator</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">OneOrZero</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> <span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;å€¼å¿…é¡»æ˜¯ 0 æˆ– 1&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">groups</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Payload</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">payload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-å®ç°æ ¡éªŒé€»è¾‘-oneorzerovalidatorâ€‹â€‹" tabindex="-1"><a class="header-anchor" href="#_2-å®ç°æ ¡éªŒé€»è¾‘-oneorzerovalidatorâ€‹â€‹"><span>2. å®ç°æ ¡éªŒé€»è¾‘ OneOrZeroValidatorâ€‹â€‹</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span></span><span class="token class-name">ConstraintValidator</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span></span><span class="token class-name">ConstraintValidatorContext</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OneOrZeroValidator</span> <span class="token keyword">implements</span> <span class="token class-name">ConstraintValidator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">OneOrZero</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isValid</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> value<span class="token punctuation">,</span> <span class="token class-name">ConstraintValidatorContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> value <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> value <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="â€‹â€‹3-åœ¨å®ä½“ç±»ä¸­ä½¿ç”¨â€‹â€‹" tabindex="-1"><a class="header-anchor" href="#â€‹â€‹3-åœ¨å®ä½“ç±»ä¸­ä½¿ç”¨â€‹â€‹"><span>â€‹â€‹3. åœ¨å®ä½“ç±»ä¸­ä½¿ç”¨â€‹â€‹</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRequest</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@OneOrZero</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">&quot;çŠ¶æ€å¿…é¡»æ˜¯ 0 æˆ– 1&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> status<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="â€‹â€‹5-å…¨å±€å¼‚å¸¸å¤„ç†-controlleradvice-â€‹â€‹" tabindex="-1"><a class="header-anchor" href="#â€‹â€‹5-å…¨å±€å¼‚å¸¸å¤„ç†-controlleradvice-â€‹â€‹"><span>â€‹â€‹5. å…¨å±€å¼‚å¸¸å¤„ç†ï¼ˆ@ControllerAdviceï¼‰â€‹â€‹</span></a></h2><p>å½“æ ¡éªŒå¤±è´¥æ—¶ï¼ŒSpring ä¼šæŠ›å‡º MethodArgumentNotValidExceptionï¼Œå¯ä»¥é€šè¿‡ @ControllerAdvice ç»Ÿä¸€å¤„ç†ï¼š</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpStatus</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">ResponseEntity</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span></span><span class="token class-name">MethodArgumentNotValidException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ExceptionHandler</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestControllerAdvice</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestControllerAdvice</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GlobalExceptionHandler</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">MethodArgumentNotValidException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleValidationExceptions</span><span class="token punctuation">(</span><span class="token class-name">MethodArgumentNotValidException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> errors <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ex<span class="token punctuation">.</span><span class="token function">getBindingResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFieldErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>error <span class="token operator">-&gt;</span> 
            errors<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span><span class="token function">getField</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> error<span class="token punctuation">.</span><span class="token function">getDefaultMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>errors<span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">BAD_REQUEST</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹â€‹è¿”å›ç¤ºä¾‹â€‹â€‹ï¼š</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;é‚®ç®±æ ¼å¼ä¸æ­£ç¡®&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="â€‹â€‹6-å¸¸è§é—®é¢˜â€‹â€‹" tabindex="-1"><a class="header-anchor" href="#â€‹â€‹6-å¸¸è§é—®é¢˜â€‹â€‹"><span>â€‹â€‹6. å¸¸è§é—®é¢˜â€‹â€‹</span></a></h2><p><strong>â€‹â€‹Q1: @Valid å’Œ @Validated çš„åŒºåˆ«ï¼Ÿâ€‹â€‹</strong></p><table><thead><tr><th>æ³¨è§£</th><th>ä½œç”¨</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>@Valid</td><td>è§¦å‘ JSR-303 æ ¡éªŒ</td><td>ä¸€èˆ¬ç”¨äºåµŒå¥—å¯¹è±¡æ ¡éªŒï¼ˆå¦‚ @Valid User userï¼‰</td></tr><tr><td>@Validated</td><td>Spring æä¾›çš„å¢å¼ºç‰ˆï¼Œæ”¯æŒåˆ†ç»„æ ¡éªŒ</td><td>ä¸€èˆ¬ç”¨äº Controller æ–¹æ³•å‚æ•°æ ¡éªŒ</td></tr></tbody></table><p><strong>â€‹â€‹Q2: ä¸ºä»€ä¹ˆ @Validated ä¸ç”Ÿæ•ˆï¼Ÿâ€‹â€‹</strong></p><ul><li>æ£€æŸ¥æ˜¯å¦åœ¨ â€‹â€‹Controller ç±»æˆ–æ–¹æ³•å‚æ•°â€‹â€‹ ä¸Šä½¿ç”¨äº† @Validatedã€‚</li><li>ç¡®ä¿ä¾èµ–æ­£ç¡®ï¼ˆSpring Boot é»˜è®¤åŒ…å« spring-boot-starter-validationï¼‰ã€‚</li><li>å¦‚æœæ ¡éªŒçš„æ˜¯ List æˆ– Mapï¼Œç¡®ä¿ä½¿ç”¨ @Valid åµŒå¥—æ ¡éªŒï¼š</li></ul><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Request</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Valid</span>  <span class="token comment">// å¿…é¡»åŠ  @Valid</span>
        <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> users<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-â€‹â€‹æ€»ç»“â€‹â€‹" tabindex="-1"><a class="header-anchor" href="#_7-â€‹â€‹æ€»ç»“â€‹â€‹"><span>7. â€‹â€‹æ€»ç»“â€‹â€‹</span></a></h2><table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ³¨è§£</th></tr></thead><tbody><tr><td>åŸºæœ¬æ ¡éªŒ</td><td>@NotNull, @NotEmpty, @Pattern, @Size</td></tr><tr><td>åˆ†ç»„æ ¡éªŒ</td><td>groups + @Validated</td></tr><tr><td>åµŒå¥—æ ¡éªŒ</td><td>@Valid</td></tr><tr><td>è‡ªå®šä¹‰æ ¡éªŒ</td><td>@Constraint + ConstraintValidator</td></tr><tr><td>å…¨å±€å¼‚å¸¸å¤„ç†</td><td>@ControllerAdvice</td></tr></tbody></table><p><strong>é€šè¿‡åˆç†ä½¿ç”¨è¿™äº›æ³¨è§£ï¼Œå¯ä»¥è½»æ¾å®ç°å‚æ•°æ ¡éªŒï¼Œæé«˜ä»£ç å¥å£®æ€§ï¼ ğŸš€</strong></p>`,35))])}const d=a(l,[["render",c],["__file","æ ¡éªŒæ³¨è§£.html.vue"]]),k=JSON.parse('{"path":"/posts/backend/%E6%A0%A1%E9%AA%8C%E6%B3%A8%E8%A7%A3.html","title":"æ³¨è§£-spring bootä¸­çš„æ ¡éªŒæ³¨è§£","lang":"zh-CN","frontmatter":{"title":"æ³¨è§£-spring bootä¸­çš„æ ¡éªŒæ³¨è§£","date":"2024-05-07T00:00:00.000Z","icon":"dragon","category":["åç«¯"],"tag":["æ³¨è§£"],"order":330,"description":"åœ¨ Spring Boot ä¸­ï¼Œ@Validated æ˜¯ç”¨äºè§¦å‘å‚æ•°æ ¡éªŒçš„æ³¨è§£ï¼Œé€šå¸¸ä¸ â€‹â€‹JSR-303/JSR-380â€‹â€‹ï¼ˆBean Validationï¼‰æä¾›çš„æ ¡éªŒæ³¨è§£ä¸€èµ·ä½¿ç”¨ã€‚ä»¥ä¸‹æ˜¯å¸¸è§çš„æ ¡éªŒæ³¨è§£åŠå…¶ç”¨æ³•ï¼š","head":[["meta",{"property":"og:url","content":"https://github.com/Neumannzc/blog/blog/posts/backend/%E6%A0%A1%E9%AA%8C%E6%B3%A8%E8%A7%A3.html"}],["meta",{"property":"og:site_name","content":"Cafe Babe"}],["meta",{"property":"og:title","content":"æ³¨è§£-spring bootä¸­çš„æ ¡éªŒæ³¨è§£"}],["meta",{"property":"og:description","content":"åœ¨ Spring Boot ä¸­ï¼Œ@Validated æ˜¯ç”¨äºè§¦å‘å‚æ•°æ ¡éªŒçš„æ³¨è§£ï¼Œé€šå¸¸ä¸ â€‹â€‹JSR-303/JSR-380â€‹â€‹ï¼ˆBean Validationï¼‰æä¾›çš„æ ¡éªŒæ³¨è§£ä¸€èµ·ä½¿ç”¨ã€‚ä»¥ä¸‹æ˜¯å¸¸è§çš„æ ¡éªŒæ³¨è§£åŠå…¶ç”¨æ³•ï¼š"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-04-30T01:20:42.000Z"}],["meta",{"property":"article:author","content":"Cafe Babe"}],["meta",{"property":"article:tag","content":"æ³¨è§£"}],["meta",{"property":"article:published_time","content":"2024-05-07T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-04-30T01:20:42.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"æ³¨è§£-spring bootä¸­çš„æ ¡éªŒæ³¨è§£\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-05-07T00:00:00.000Z\\",\\"dateModified\\":\\"2025-04-30T01:20:42.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Cafe Babe\\",\\"url\\":\\"https://gitee.com/z517890027\\"}]}"]]},"headers":[{"level":2,"title":"â€‹1. åŸºæœ¬æ ¡éªŒæ³¨è§£â€‹â€‹","slug":"â€‹1-åŸºæœ¬æ ¡éªŒæ³¨è§£â€‹â€‹","link":"#â€‹1-åŸºæœ¬æ ¡éªŒæ³¨è§£â€‹â€‹","children":[]},{"level":2,"title":"â€‹â€‹2. åˆ†ç»„æ ¡éªŒï¼ˆgroupsï¼‰â€‹â€‹","slug":"â€‹â€‹2-åˆ†ç»„æ ¡éªŒ-groups-â€‹â€‹","link":"#â€‹â€‹2-åˆ†ç»„æ ¡éªŒ-groups-â€‹â€‹","children":[]},{"level":2,"title":"â€‹â€‹3. åµŒå¥—å¯¹è±¡æ ¡éªŒï¼ˆ@Validï¼‰â€‹â€‹","slug":"â€‹â€‹3-åµŒå¥—å¯¹è±¡æ ¡éªŒ-valid-â€‹â€‹","link":"#â€‹â€‹3-åµŒå¥—å¯¹è±¡æ ¡éªŒ-valid-â€‹â€‹","children":[]},{"level":2,"title":"â€‹â€‹4. è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£â€‹â€‹","slug":"â€‹â€‹4-è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£â€‹â€‹","link":"#â€‹â€‹4-è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£â€‹â€‹","children":[{"level":3,"title":"1. å®šä¹‰æ³¨è§£ @OneOrZeroâ€‹â€‹","slug":"_1-å®šä¹‰æ³¨è§£-oneorzeroâ€‹â€‹","link":"#_1-å®šä¹‰æ³¨è§£-oneorzeroâ€‹â€‹","children":[]},{"level":3,"title":"2. å®ç°æ ¡éªŒé€»è¾‘ OneOrZeroValidatorâ€‹â€‹","slug":"_2-å®ç°æ ¡éªŒé€»è¾‘-oneorzerovalidatorâ€‹â€‹","link":"#_2-å®ç°æ ¡éªŒé€»è¾‘-oneorzerovalidatorâ€‹â€‹","children":[]},{"level":3,"title":"â€‹â€‹3. åœ¨å®ä½“ç±»ä¸­ä½¿ç”¨â€‹â€‹","slug":"â€‹â€‹3-åœ¨å®ä½“ç±»ä¸­ä½¿ç”¨â€‹â€‹","link":"#â€‹â€‹3-åœ¨å®ä½“ç±»ä¸­ä½¿ç”¨â€‹â€‹","children":[]}]},{"level":2,"title":"â€‹â€‹5. å…¨å±€å¼‚å¸¸å¤„ç†ï¼ˆ@ControllerAdviceï¼‰â€‹â€‹","slug":"â€‹â€‹5-å…¨å±€å¼‚å¸¸å¤„ç†-controlleradvice-â€‹â€‹","link":"#â€‹â€‹5-å…¨å±€å¼‚å¸¸å¤„ç†-controlleradvice-â€‹â€‹","children":[]},{"level":2,"title":"â€‹â€‹6. å¸¸è§é—®é¢˜â€‹â€‹","slug":"â€‹â€‹6-å¸¸è§é—®é¢˜â€‹â€‹","link":"#â€‹â€‹6-å¸¸è§é—®é¢˜â€‹â€‹","children":[]},{"level":2,"title":"7. â€‹â€‹æ€»ç»“â€‹â€‹","slug":"_7-â€‹â€‹æ€»ç»“â€‹â€‹","link":"#_7-â€‹â€‹æ€»ç»“â€‹â€‹","children":[]}],"git":{"createdTime":1745976042000,"updatedTime":1745976042000,"contributors":[{"name":"Cafe Babe","email":"517890027@qq.com","commits":1}]},"readingTime":{"minutes":3.72,"words":1116},"filePathRelative":"posts/backend/æ ¡éªŒæ³¨è§£.md","localizedDate":"2024å¹´5æœˆ7æ—¥","excerpt":"<p>åœ¨ Spring Boot ä¸­ï¼Œ@Validated æ˜¯ç”¨äºè§¦å‘å‚æ•°æ ¡éªŒçš„æ³¨è§£ï¼Œé€šå¸¸ä¸ â€‹â€‹JSR-303/JSR-380â€‹â€‹ï¼ˆBean Validationï¼‰æä¾›çš„æ ¡éªŒæ³¨è§£ä¸€èµ·ä½¿ç”¨ã€‚ä»¥ä¸‹æ˜¯å¸¸è§çš„æ ¡éªŒæ³¨è§£åŠå…¶ç”¨æ³•ï¼š</p>\\n","autoDesc":true}');export{d as comp,k as data};
