---
title: 0 模块功能实现
date: 2025-02-18
icon: dragon
category:
  - 棠棠外卖
tag:
  - 项目总结
order: 100
---

本部分记录项目各个模块中需要注意的功能点

<!-- more -->

## 1. 分类模块

### 1.1 根据id删除分类

- 当分类下存在菜品/套餐时, 禁止删除菜品

## 2. 菜品模块

### 2.1 缓存存储菜品的说明

菜品根据分类id(categoryId)进行分组记录, 对于缓存的存/删情况如下:

- 根据分类id存储菜品
  - 移动端根据分类id查询菜品

- 删除所属分类id的所有菜品
  - 新增菜品

- 删除缓存中的所有菜品
  - 根据ids批量删除菜品
  - 修改菜品
  - 菜品起售/停售

### 2.2 根据ids批量删除菜品

- 当菜品处于起售状态时, 无法删除
- 当菜品被其他套餐关联时, 无法删除

### 2.3 菜品起售/停售

- 进行停售操作时, 需要将包含当前菜品的套餐也一起停售

## 3. 员工模块

### 3.1 登陆模块

- 当 用户不存在/密码错误/账号被锁定 时, 用户登陆失败
- 登陆成功后, 需要返回jwt令牌

### 3.2 根据id查询员工

- 对于密码等隐私信息, 在数据返回前, 需要进行加密 或 置空 处理

## 4. 订单模块

### 4.1 下单

- 用户地址为空/购物出为空的情况下, 无法下单
- 对于配送地址, 需要进行配送距离的校验, 超出配送距离的无法配送
- 创建订单后, 需要同时创建订单详情

### 4.2 订单支付

- 不是处于待支付状态的订单, 无法进行支付

### 4.3 取消订单

- 当订单不存在时, 不可取消订单
- 当订单不处于待支付/待接单状态时, 用户无法自主取消订单
- 对于已支付的订单, 需要进行退款

### 4.4 拒单

- 当订单不存在时, 不可拒单
- 只有订单处于待接单状态时, 才可以拒单
- 对于已支付的订单, 需要进行退款

### 4.5 派送订单

- 只有处于接单状态的订单, 才可以进行配送

### 4.6 完成订单

- 只有处于配送中的订单, 才可以完成订单

## 5. 套餐模块

### 5.1 缓存存储套餐的说明

套餐根据分类id(categoryId)进行分组记录, 对于缓存的存/删情况如下:

- 根据分类id存储套餐
  - 移动端根据分类id查询套餐

- 删除某分类id下存储的套餐
  - 新增套餐

- 删除存储的所有套餐
  - 根据ids批量删除套餐
  - 修改套餐
  - 起售/停售套餐